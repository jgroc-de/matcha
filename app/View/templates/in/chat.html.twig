{% extends "templates/home.html.twig" %}
{% from 'macro/form/textarea.html.twig' import textarea %}
{% set color = {
    'Rick': '#878f99',
    'Jerry': '#ff7b25',
    'Beth': '#6b5b95',
    'Morty': '#feb236',
    'Summer': '#d64161',
} %}
{% block main %}
<div class="w3-row">
    <div class="w3-col l6 w3-card-4 w3-margin-top">
        <h3 class="w3-hover-green w3-theme-l1" style="cursor:pointer;margin:0" matcha-toggle>Choose your "Friend"</h3>
        <div class="w3-row w3-theme-l5" id="Friends">
            {% for user in friends %}
                <div class="w3-col s6 m3">
                    <div id="{{ user.id }}" class="w3-margin  w3-card-4">
                        <a href="#" class="w3-theme-d1" onclick="tchatWith('{{ user.pseudo }}', {{ user.id }}, {{ me.id }}, '{{ user.suscriber }}')">
                            <h4 class="{{ color[user.gender] }}" style="background-color:{{ color[user.gender] }}">{{ user.pseudo }}</h4>
                            <div class="w3-black w3-display-container" style="height:112px">
                                <img src="{{ user.img1 }}" alt="{{ user.pseudo }}'s picture" class="w3-display-middle cut-img" height="100%" width="100%">
                            </div>
                        </a>
                    </div>
                </div>
            {% endfor %}
        </div>
    </div>
    <div id="tchatWindow" class="w3-col l6 w3-margin-top w3-hide">
        <div class="w3-content w3-theme-l5">
            <h3 id="tchatTitle" class="w3-theme-l1" style="margin:0"></h3>
            <div id="tchatMessages" class="w3-padding" style="height:400px;overflow:auto;background-color:white"></div>
            <button id="tchatButton" type="button" class="w3-button w3-right w3-ripple w3-theme-l1 w3-hover-green w3-margin-left">Send</button>
            <label for="tchatMsg"></label>
            <textarea id="tchatMsg" class="w3-input" placeholder="type some insult here"></textarea>
        </div>
    </div>
</div>
{% endblock %}

{% block script %}
    <script>var myId = '{{ me.publicToken }}'</script>
    <script src="{{ BASE_URL }}/js/autobahn.js"></script>
    <script src="{{ BASE_URL }}/js/notification.js"></script>
    <script src="{{ BASE_URL }}/js/chat.js"></script>
{% endblock %}
